{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Owner\\\\React-For-Beginners-Starter-Files-master\\\\React-For-Beginners-Starter-Files-master\\\\catch-of-the-day\\\\src\\\\components\\\\Inventory.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport firebase from 'firebase';\nimport AddFishForm from './AddFishForm';\nimport EditFishForm from './EditFishForm';\nimport Login from './Login';\nimport base, { firebaseApp } from '../base';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Inventory = /*#__PURE__*/function (_React$Component) {\n  _inherits(Inventory, _React$Component);\n\n  var _super = _createSuper(Inventory);\n\n  function Inventory() {\n    var _this;\n\n    _classCallCheck(this, Inventory);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      uid: null,\n      owner: null\n    };\n\n    _this.authHandler = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(authData) {\n        var store;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return base.fetch(_this.props.storeId, {\n                  context: _assertThisInitialized(_this)\n                });\n\n              case 2:\n                store = _context.sent;\n                //we put await infront so that the store is in the variable, not the promise from the fetch() function\n                console.log(store); //outputs all the fishes in that particular store\n                //2. Claim it if there is no onwer\n\n                if (store.owner) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 7;\n                return base.post(\"\".concat(_this.props.storeId, \"/owner\"), {\n                  data: authData.user.uid //go to Dev tools and branch out the auth data of the user who signed in -- uid is a unique identifier for that user\n\n                });\n\n              case 7:\n                ; //3. Set state of inventory to reflect current user\n                //the below code will figure out whether the user signed in is the owner, or someone else.\n                //note, we are accessing state outside of App.js, but is ok since it is localized to Inventory.js\n\n                _this.setState({\n                  uid: authData.user.uid,\n                  owner: store.owner || authData.user.uid\n                });\n\n                console.log(authData);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.authenticate = function (provider) {\n      var authProvider = new firebase.auth[\"\".concat(provider, \"AuthProvider\")](); //essentially .authFacebookauthProvider etc\n\n      firebaseApp.auth().signInWithPopup(authProvider).then(_this.authHandler); //data is passed to authHandler after user login\n    };\n\n    return _this;\n  }\n\n  _createClass(Inventory, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //check if they are logged in\n      if (!this.state.uid) {\n        return /*#__PURE__*/_jsxDEV(Login, {\n          authenticate: this.authenticate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 16\n        }, this);\n      }\n\n      ;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inventory\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this), Object.keys(this.props.fishes).map(function (key) {\n          return /*#__PURE__*/_jsxDEV(EditFishForm, {\n            index: key,\n            fish: _this2.props.fishes[key],\n            updateFish: _this2.props.updateFish,\n            deleteFish: _this2.props.deleteFish\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }, _this2);\n        }), /*#__PURE__*/_jsxDEV(AddFishForm, {\n          addFish: this.props.addFish\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.props.loadSampleFishes,\n          children: \"Load Sample Fishes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return Inventory;\n}(React.Component);\n\nInventory.propTypes = {\n  fishes: PropTypes.shape({\n    image: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    desc: PropTypes.string.isRequired,\n    status: PropTypes.string.isRequired,\n    price: PropTypes.number.isRequired\n  }),\n  updateFish: PropTypes.func.isRequired,\n  deleteFish: PropTypes.func.isRequired,\n  loadSampleFishes: PropTypes.func.isRequired\n};\nexport default Inventory;","map":{"version":3,"sources":["C:/Users/Owner/React-For-Beginners-Starter-Files-master/React-For-Beginners-Starter-Files-master/catch-of-the-day/src/components/Inventory.js"],"names":["React","PropTypes","firebase","AddFishForm","EditFishForm","Login","base","firebaseApp","Inventory","state","uid","owner","authHandler","authData","fetch","props","storeId","context","store","console","log","post","data","user","setState","authenticate","provider","authProvider","auth","signInWithPopup","then","Object","keys","fishes","map","key","updateFish","deleteFish","addFish","loadSampleFishes","Component","propTypes","shape","image","string","isRequired","name","desc","status","price","number","func"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport firebase from 'firebase';\r\nimport AddFishForm from './AddFishForm';\r\nimport EditFishForm from './EditFishForm';\r\nimport Login from './Login';\r\nimport base, { firebaseApp } from '../base';\r\n\r\nclass Inventory extends React.Component{\r\n\r\n    static propTypes ={\r\n        fishes: PropTypes.shape({\r\n            image: PropTypes.string.isRequired,\r\n            name: PropTypes.string.isRequired,\r\n            desc: PropTypes.string.isRequired,\r\n            status: PropTypes.string.isRequired,\r\n            price: PropTypes.number.isRequired\r\n        }),\r\n        updateFish: PropTypes.func.isRequired,\r\n        deleteFish: PropTypes.func.isRequired,\r\n        loadSampleFishes: PropTypes.func.isRequired\r\n    };\r\n\r\n    state={\r\n        uid:null,\r\n        owner:null\r\n    };\r\n\r\n    authHandler= async (authData)=>{\r\n        //1. Look up the current store in firebase DB\r\n    const store = await base.fetch(this.props.storeId, {context:this}); //we put await infront so that the store is in the variable, not the promise from the fetch() function\r\n    console.log(store)//outputs all the fishes in that particular store\r\n        //2. Claim it if there is no onwer\r\n        if(!store.owner){\r\n            //save it as our own - i.e. push to firebase\r\n            await base.post(`${this.props.storeId}/owner`, {\r\n                data: authData.user.uid //go to Dev tools and branch out the auth data of the user who signed in -- uid is a unique identifier for that user\r\n            });\r\n        };\r\n        //3. Set state of inventory to reflect current user\r\n        //the below code will figure out whether the user signed in is the owner, or someone else.\r\n        //note, we are accessing state outside of App.js, but is ok since it is localized to Inventory.js\r\n        this.setState({\r\n            uid: authData.user.uid,\r\n            owner: store.owner || authData.user.uid\r\n        });\r\n    console.log(authData)\r\n    };\r\n\r\n    authenticate=provider=>{\r\n        const authProvider = new firebase.auth[`${provider}AuthProvider`]();//essentially .authFacebookauthProvider etc\r\n        firebaseApp\r\n        .auth()\r\n        .signInWithPopup(authProvider)\r\n        .then(this.authHandler);//data is passed to authHandler after user login\r\n    };\r\n\r\n    render() {\r\n        //check if they are logged in\r\n        if(!this.state.uid){\r\n        return <Login authenticate={this.authenticate}/>\r\n        };\r\n        return (\r\n\r\n            <div className =\"inventory\">\r\n                <h2>Inventory</h2>\r\n                {Object.keys(this.props.fishes).map(key=> \r\n                <EditFishForm \r\n                key={key} \r\n                index={key}\r\n                fish={this.props.fishes[key]} \r\n                updateFish={this.props.updateFish}\r\n                deleteFish={this.props.deleteFish}    \r\n                />)}\r\n                <AddFishForm addFish={this.props.addFish} /> \r\n            <button onClick={this.props.loadSampleFishes}>Load Sample Fishes</button>\r\n            \r\n            {/**Note about above-addFish is being passed down from parent app.js. It was first passed\r\n            to Inventory in App.js (line 29), adding it to Inventory's 'props'. Now it is passed down\r\n            again to addFishForm, but we must include props in the call. */}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default Inventory;"]},"metadata":{},"sourceType":"module"}